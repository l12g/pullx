!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).pullx=e()}(this,function(){"use strict";var y={maxHeight:100,duration:200,successedDelay:200,loadingText:"loading....",holdText:"pulldown to refresh",releaseText:"release to refresh",successedText:"successed!",className:"pullx"};function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){null!=e&&e<=t.length||(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e,n,r){Object.defineProperty(t,e,{configurable:!0,get:function(){return n},set:function(t){n=t,r&&r(t)}})}var v=Symbol();function n(t,e,n){var r="string"==typeof t?document.querySelector(t):t;if(r&&!r[v]){g(r,v,!0);var o=Object.assign({},y,n),i=document.createElement("div");i.className="pulldown-x",i.style.cssText="height:0;display:flex;align-items:center;justify-content:center;overflow:hidden;",r.prepend(i);var s,u,a,c,l=(s=i,c={init:(u=o).holdText,ready:u.releaseText,loading:u.loadingText,successed:u.successedText},g(a={pos:0,isHold:!1},"height",0,function(t){s.style.height=t+"px"}),g(a,"status","init",function(t){s.innerText=c[t]}),g(a,"animation",!1,function(t){s.style.transition=t?"all ".concat(u.duration,"ms"):null}),a.height=0,a.status="init",a.animation=!1,a),f=0,d=function(){l.height=0},m=function(){l.status="successed",clearTimeout(f),f=setTimeout(d,o.successedDelay)},h=[[i,"transitionend",function(){l.status="init"}],[r,"touchstart",function(t){var e=p(t.touches,1)[0],n=r===document.body?document.documentElement.scrollTop:r.scrollTop;e&&n<=0&&"init"===l.status&&(l.animation=!1,l.pos=e.screenY,l.isHold=!0,r.prepend(i))}],[document,"touchend",function(){if(l.isHold=!1,l.animation=!0,"init"===l.status)return d();var t;"ready"===l.status&&("function"==typeof e?(l.status="loading",(t=e(m))&&t.constructor===Promise&&t.then(m)):d())}],[document,"touchmove",function(t){var e,n;l.isHold&&(e=p(t.touches,1),l.status=o.maxHeight/3*2<(n=Math.floor(e[0].screenY-l.pos))?"ready":"init",l.height=Math.min(y.maxHeight,n))}]];return h.forEach(function(t){var e=p(t,3);e[0].addEventListener(e[1],e[2])}),function(){h.forEach(function(t){var e=p(t,3);e[0].removeEventListener(e[1],e[2])});try{i.remove(),delete t[v]}catch(t){}}}}function t(t,e){return n(t,e)}return t.defaults=y,t});
