!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).pullx=e()}(this,function(){"use strict";var m={maxHeight:100,duration:200,successedDelay:200,loadingText:"loading....",holdText:"pulldown to refresh",releaseText:"release to refresh",successedText:"successed!",className:"pullx"};function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){null!=e&&e<=t.length||(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e,n,r){Object.defineProperty(t,e,{configurable:!0,get:function(){return n},set:function(t){n=t,r&&r(t)}})}var g=Symbol();function o(e,n,r){var o="string"==typeof e?document.querySelector(e):e;if(o&&!o[g]){p(o,g,!0);var i=document.createElement("div");i.className="pullx",i.style.cssText="height:0;display:flex;align-items:center;justify-content:center;overflow:hidden;",o.prepend(i);var s,a,t,u,c=(s=i,u={init:(a=r).holdText,ready:a.releaseText,loading:a.loadingText,successed:a.successedText},p(t={pos:0,isHold:!1},"height",0,function(t){s.style.height=t+"px"}),p(t,"status","init",function(t){s.innerText=u[t]}),p(t,"animation",!1,function(t){s.style.transition=t?"all ".concat(a.duration,"ms"):null}),t.height=0,t.status="init",t.animation=!1,t),l=0,d=function(){c.height=0},f=function(){c.status="successed",clearTimeout(l),l=setTimeout(d,r.successedDelay)},h=[[i,"transitionend",function(){c.status="init"}],[o,"touchstart",function(t){var e=y(t.touches,1)[0],n=o===document.body?document.documentElement.scrollTop:o.scrollTop;e&&n<=0&&"init"===c.status&&(c.animation=!1,c.pos=e.screenY,c.isHold=!0,o.prepend(i))}],[document,"touchend",function(){if(c.isHold=!1,c.animation=!0,"init"===c.status)return d();var t;"ready"===c.status&&("function"==typeof n?(c.status="loading",(t=n(f))&&t.constructor===Promise&&t.then(f)):d())}],[document,"touchmove",function(t){var e,n;c.isHold&&(e=y(t.touches,1),c.status=r.maxHeight/3*2<(n=Math.floor(e[0].screenY-c.pos))?"ready":"init",c.height=Math.min(m.maxHeight,n))}]];return h.forEach(function(t){var e=y(t,3);e[0].addEventListener(e[1],e[2])}),function(){var t;h.forEach(function(t){var e=y(t,3);e[0].removeEventListener(e[1],e[2])}),delete(t=c).height,delete t.status,delete t.animation;try{i.remove(),delete e[g]}catch(t){}}}}function t(t,e,n){return o(t,e,Object.assign({},m,n))}return t.defaults=m,t});
